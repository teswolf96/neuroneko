# NeuroNeko
![NeuroNeko Logo](static/neuroneko.png)

**NeuroNeko: Your personal, powerful, and highly configurable AI chat interface.**

NeuroNeko is a sophisticated, Django-based web application designed for seamless interaction with multiple AI models. It emphasizes threaded conversations, robust AI configuration, extensive user customization, and real-time interaction, providing a rich and dynamic chat experience.

## Table of Contents

1.  [Introduction](#introduction--what-is-neuroneko)
2.  [Key Features](#key-features)
3.  [Visual Showcase](#visual-showcase)
4.  [Technology Stack](#technology-stack)
5.  [Prerequisites](#prerequisites)
6.  [Installation and Setup](#installation-and-setup)
7.  [Getting Started / User Guide](#getting-started--user-guide)
8.  [Project Structure](#project-structure)
9.  [Configuration Deep Dive](#configuration-deep-dive)
10. [Architecture Overview](#architecture-overview)
11. [Troubleshooting Common Issues](#troubleshooting-common-issues)
12. [Contributing](#contributing)
13. [Roadmap / Future Enhancements](#roadmap--future-enhancements)
14. [License](#license)

## Introduction / What is NeuroNeko?

NeuroNeko is a feature-rich web application built with Python and Django, offering a sophisticated platform for engaging with a variety of AI models. It moves beyond simple chat interfaces by providing:

*   **Threaded Conversations:** Manage complex dialogues with branching capabilities.
*   **Multi-AI Support:** Configure and switch between different AI providers and models seamlessly.
*   **Deep Customization:** Tailor the AI's behavior, your user settings, and chat organization to your preferences.
*   **Real-time Interaction:** Experience fluid conversations with streaming AI responses.
*   **Cost Awareness:** Keep track of token usage and estimated costs for your AI interactions.

Whether you're a developer experimenting with AI, a writer seeking an AI partner, or simply someone curious about the capabilities of modern language models, NeuroNeko provides the tools for a productive and insightful experience.

## Key Features

*   **Multi-User Support:** Secure user authentication (signup, login, logout) with individualized settings and configurations.
*   **Flexible AI Provider Configuration:**
    *   Supports multiple AI providers (e.g., Anthropic, OpenAI, Google).
    *   Manage API endpoints, unique API keys, and specific AI models (e.g., "gpt-4-turbo", "claude-3-opus", "claude-3-haiku-20240307").
    *   Define per-model cost details for input, output, and cache operations to track expenses.
    *   Test API endpoint configurations directly from the UI.
*   **Advanced Threaded Chat Interface:**
    *   Engage in complex, branching conversations with an "active child" navigation system to explore different dialogue paths.
    *   Real-time streaming of AI responses for a natural chat flow, powered by Django Channels.
    *   Manually set chat titles or have them automatically regenerated by an AI model based on conversation context.
    *   Select a specific AI model and temperature for each chat session.
*   **Comprehensive Message Management:**
    *   Add, edit, and delete messages within a chat.
    *   Change message roles (User, Assistant, System) on the fly.
    *   Copy message content with a single click.
    *   Regenerate AI responses, creating new sibling messages for comparison.
    *   Add sibling messages to explore alternative conversational branches.
    *   "Clean Remove" messages: Remove a message while automatically reparenting its children to maintain conversation flow.
    *   Delete messages and all their subsequent replies.
    *   Delete only the children of a message.
*   **Efficient Chat Organization:**
    *   Organize chats into customizable **Folders** (create, rename, delete).
    *   Drag-and-drop chats between folders for easy management.
    *   Sidebar search for quickly finding chats and folders.
*   **Cost Estimation & Tracking:**
    *   Real-time estimation of input token costs as you type.
    *   Detailed per-message cost calculation based on actual token usage (input, output, cache) and configured model rates.
    *   Tooltip display for a breakdown of costs per message.
*   **Productivity Tools:**
    *   **Saved Prompts & Ideas:** Create, manage, and quickly insert pre-defined text snippets (prompts or ideas) into your messages.
    *   **Advanced Search:** Perform full-text search across all message content in your entire chat history, with context snippets and direct navigation to the message.
    *   **Message Caching Control:** Explicitly pin a message in a chat to define a "cache until" point, optimizing context for AI models that support it (like Anthropic's caching features).
*   **User Customization (`User Settings`):**
    *   Personalize your default AI model for new chats.
    *   Set a default system prompt to guide AI behavior.
    *   Define a default temperature for AI responses.
    *   Choose your preferred chat font size for readability.
    *   The system remembers your last active chat for a seamless experience upon return.
*   **Automatic New User Setup:**
    *   New users are automatically provisioned with a default AI endpoint (Anthropic), a default AI model (Claude 3 Haiku), default user settings, a sample "My First Chat", and an initial welcome message to get started immediately.

## Visual Showcase

*(Screenshots and GIFs to be added here to demonstrate the UI and features)*

*   *Placeholder for: Screenshot of the main chat interface with threaded messages.*
*   *Placeholder for: GIF demonstrating folder organization and drag-and-drop functionality.*
*   *Placeholder for: Screenshot of the API Configuration page.*
*   *Placeholder for: Screenshot of User Settings.*
*   *Placeholder for: Screenshot of the Advanced Search modal with results.*
*   *Placeholder for: Screenshot of the Prompt/Idea insertion modal.*

## Technology Stack

*   **Backend:**
    *   Python 3.8+
    *   Django 4.2+
    *   Django Channels (for WebSocket/real-time features)
    *   Daphne (ASGI server)
*   **Database:** SQLite (default, easily configurable in Django settings)
*   **HTTP Client:** `httpx` (for robust external API communication)
*   **AI SDKs:** `anthropic` (explicitly integrated), adaptable for other providers like OpenAI and Google.
*   **Frontend:**
    *   HTML5
    *   Tailwind CSS (for modern, utility-first styling)
    *   Vanilla JavaScript (for dynamic UI interactions, rendered via Django Templates)
    *   Highlight.js (for syntax highlighting in code blocks within chat messages)

## Prerequisites

*   Python 3.8 or higher
*   `pip` (Python package installer)
*   Git (for cloning the repository)

## Installation and Setup

1.  **Clone the repository:**
    ```bash
    git clone <repository-url>
    cd neuroneko # Or your chosen project directory name
    ```

2.  **Create and activate a virtual environment (strongly recommended):**
    ```bash
    python -m venv venv
    # On Windows
    venv\Scripts\activate
    # On macOS/Linux
    source venv/bin/activate
    ```

3.  **Install dependencies:**
    ```bash
    pip install -r requirements.txt
    ```

4.  **Apply database migrations:**
    This sets up your database schema.
    ```bash
    python manage.py migrate
    ```

5.  **Create a superuser (for admin access):**
    This account is necessary to access the Django admin interface, where you can manage users and other site-wide settings. You will also use this to create initial regular user accounts.
    ```bash
    python manage.py createsuperuser
    ```
    Follow the prompts to set a username, email (optional), and password.

6.  **Run the development server:**
    NeuroNeko uses Daphne as its ASGI server to handle both HTTP requests and WebSocket connections.
    ```bash
    daphne -p 8000 chat_project.asgi:application
    ```

7.  **Access the application:**
    Open your web browser and navigate to `http://127.0.0.1:8000/`.

## Getting Started / User Guide

1.  **Create User Accounts (Admin Task):**
    *   After starting the server, log in as the superuser you created.
    *   Navigate to the Django admin interface by adding `/admin/` to the URL (e.g., `http://127.0.0.1:8000/admin/`).
    *   Under "AUTHENTICATION AND AUTHORIZATION", click on "Users" and then "Add user". Create one or more regular user accounts.
    *   New users will automatically get default settings, an AI endpoint, a model, and a sample chat.

2.  **Login as a Regular User:**
    *   Go to the main application URL (`http://127.0.0.1:8000/`).
    *   Log in with the credentials of a regular user account you created.

3.  **Initial AI Configuration:**
    *   Upon first login, a "Default Anthropic" endpoint and a "Claude 3 Haiku" model are pre-configured.
    *   To use these or add others (like OpenAI), navigate to **API Configuration** from the sidebar.
    *   **Add/Edit AI Endpoints:**
        *   Click "Add AI Endpoint" or edit an existing one.
        *   Provide a **Name** (e.g., "My OpenAI Key").
        *   Select the **Provider** (e.g., Anthropic, OpenAI, Google).
        *   Enter your **API Key** for that provider.
        *   Save the endpoint.
    *   **Add/Edit AI Models:**
        *   Under an endpoint, click "Add Model" or edit an existing one.
        *   Provide a **Name** for the model in the UI (e.g., "GPT-4 Turbo Preview").
        *   Enter the correct **Model ID** as used by the provider's API (e.g., `gpt-4-1106-preview`, `claude-3-opus-20240229`).
        *   Optionally, set default temperature, max tokens, and **cost details** (input/output tokens per million, currency). These costs are used for tracking and estimation.
        *   Save the model.

4.  **Your First Chat:**
    *   Click the **"+ New Chat"** button in the sidebar.
    *   The chat interface will open.
    *   In the header of the main content area, select your desired **Model** from the dropdown. The temperature associated with this model (or your user default) will be displayed.
    *   Type your message in the input area at the bottom and click **"Generate"** or press Enter (without Shift).

5.  **Exploring Key Features:**
    *   **Folders:** Click the "New Folder" icon (folder with a plus) in the sidebar. Drag chats into folders to organize them. Rename or delete folders using the icons that appear on hover.
    *   **Prompts & Ideas:** Go to "Manage Prompts" or "Manage Ideas" from the sidebar to create reusable text snippets. In the chat input area, use the "Prompt" or "Idea" buttons to insert them.
    *   **User Settings:** Click "Settings" in the sidebar to customize your default AI model, system prompt, temperature, and chat font size.
    *   **Message Actions:** Hover over a message to see icons for:
        *   `📄` (Copy): Copy message content.
        *   `✏️` (Edit): Edit the message text. The edit interface also allows generating a response from the edited content or inserting Prompts/Ideas.
        *   `🗑️` (Delete): Delete the message and all its replies.
        *   `🔄` (Regenerate): Create a new sibling response from the same parent.
        *   `🔀` (Add Sibling): Create a new empty sibling message to branch the conversation.
        *   `✂️` (Clean Remove): Remove the message but reparent its children (if any).
        *   `🪓` (Delete Children): Delete only the child messages of this message.
        *   `📍`/`📌` (Cache Pin): Set/unset this message as the point up to which conversation history should be cached for supported models.
    *   **Navigation Arrows (`⬅️`, `➡️`):** Appear on messages that have siblings, allowing you to navigate between different branches of the conversation.
    *   **Plus Icon (`⬇️`):** Appears below messages, allowing you to add a new child message directly beneath.


## Roadmap / Future Enhancements

*   **Enhanced UI Themes:** More theme options (e.g., different dark modes, high contrast) and user-selectable themes.
*   **Import/Export Chat History:** Allow users to export chats (e.g., as JSON, Markdown) and potentially import them.
*   **Advanced Tagging System:** Implement a tagging system for chats and/or messages for more granular organization.
*   **More Detailed Analytics:** Visualizations and reports on token usage, costs per model/provider over time.
*   **Plugin System:** Explore possibilities for a plugin architecture to allow extending functionality (e.g., custom tools, new AI providers).
*   **Direct User-to-User Sharing:** Option to share specific chats or conversation branches with other NeuroNeko users.
*   **Support for Image/Multimedia in Chats:** If AI models support it, allow uploading and displaying images.
*   **Internationalization (i18n) and Localization (l10n):** Translate the UI into multiple languages.

## License

This project is currently unlicensed. (Consider choosing an open-source license like MIT or Apache 2.0 if you plan to share it widely).
